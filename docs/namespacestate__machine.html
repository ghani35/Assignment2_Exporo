<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Assignment 2: state_machine Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Assignment 2
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">state_machine Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is the <a class="el" href="namespacestate__machine.html" title="This is the state_machine node.">state_machine</a> node.  
<a href="namespacestate__machine.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstate__machine_1_1charging.html">charging</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The charging class.  <a href="classstate__machine_1_1charging.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstate__machine_1_1filling__map.html">filling_map</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="classstate__machine_1_1filling__map.html" title="The filling_map class.The robots keeps waiting in room E untill the whole map is loaded,...">filling_map</a> class.The robots keeps waiting in room E untill the whole map is loaded, the robot can know if the map is fully loaded by subscribing to the topic /map_state.  <a href="classstate__machine_1_1filling__map.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstate__machine_1_1moving__in__corridors.html">moving_in_corridors</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The moving in corridors class.The robots keeps moving between C1 and C2 for infinit time, the robots keep cheking the state of the battery by subscribing to the topic /battery_state, if the battery is low the robot goes to CHARGING state trough the transition tired.  <a href="classstate__machine_1_1moving__in__corridors.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstate__machine_1_1visiting__urgent.html">visiting_urgent</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The visting_urgent class.First, the robots checks if the battery is low goes to CHARGING state, else it checkes it the urgent room is reacheable by quering the object properties of the robot canReach, if the room can be reached it visit it and return back to the MOVING_IN_CORRIDORS trough the transition visited.  <a href="classstate__machine_1_1visiting__urgent.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad7934580f48240658ac639c86f690c0f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#ad7934580f48240658ac639c86f690c0f">battery_callback</a> (data)</td></tr>
<tr class="memdesc:ad7934580f48240658ac639c86f690c0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function of /battery_state, used in all the states except <b>FILLING_MAP</b> to see if the battery is low and change the state to <b>charging</b>  <a href="namespacestate__machine.html#ad7934580f48240658ac639c86f690c0f">More...</a><br /></td></tr>
<tr class="separator:ad7934580f48240658ac639c86f690c0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df1431cc37cf831d9dde75e5436a771"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a5df1431cc37cf831d9dde75e5436a771">map_state_callback</a> (data)</td></tr>
<tr class="memdesc:a5df1431cc37cf831d9dde75e5436a771"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function of /map_state, used in the state <b>FILLING_MAP</b> to see if the map is fully loaded and quit this state forever.  <a href="namespacestate__machine.html#a5df1431cc37cf831d9dde75e5436a771">More...</a><br /></td></tr>
<tr class="separator:a5df1431cc37cf831d9dde75e5436a771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c680ce705e6052fa07c6cece21743d0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a5c680ce705e6052fa07c6cece21743d0">main</a> ()</td></tr>
<tr class="separator:a5c680ce705e6052fa07c6cece21743d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a940d9e6b59330364a8daf2456d8eec2a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a940d9e6b59330364a8daf2456d8eec2a">timer</a> = 1665579740</td></tr>
<tr class="memdesc:a940d9e6b59330364a8daf2456d8eec2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">global variabl, it is a timer that is updated in every single movment of the robot, The default initial value = 1665579740 and can be changed by setting the parameter /timer  <a href="namespacestate__machine.html#a940d9e6b59330364a8daf2456d8eec2a">More...</a><br /></td></tr>
<tr class="separator:a940d9e6b59330364a8daf2456d8eec2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9322672684b94bc7a0dfd332548511f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a9322672684b94bc7a0dfd332548511f0">map_state</a> = 0</td></tr>
<tr class="memdesc:a9322672684b94bc7a0dfd332548511f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the state of the map, <b>0</b> if it is not fully loaded and <b>1</b> if it is fully loaded.  <a href="namespacestate__machine.html#a9322672684b94bc7a0dfd332548511f0">More...</a><br /></td></tr>
<tr class="separator:a9322672684b94bc7a0dfd332548511f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a7966e9d4ea1dd88f7edbf77e8b67b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#ad2a7966e9d4ea1dd88f7edbf77e8b67b">battery</a> = 1</td></tr>
<tr class="memdesc:ad2a7966e9d4ea1dd88f7edbf77e8b67b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the state of the battery <b>0</b> if it is low and <b>1</b> if it is full.  <a href="namespacestate__machine.html#ad2a7966e9d4ea1dd88f7edbf77e8b67b">More...</a><br /></td></tr>
<tr class="separator:ad2a7966e9d4ea1dd88f7edbf77e8b67b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e497b9927ece26bf222ca1a5eb185f1"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a5e497b9927ece26bf222ca1a5eb185f1">to_visit</a> = 'R'</td></tr>
<tr class="memdesc:a5e497b9927ece26bf222ca1a5eb185f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the name of the <b>urgent</b> room that needs to be visited as soon as possible.  <a href="namespacestate__machine.html#a5e497b9927ece26bf222ca1a5eb185f1">More...</a><br /></td></tr>
<tr class="separator:a5e497b9927ece26bf222ca1a5eb185f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf742d51062b4fd0e8e4f68f5654462b"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#acf742d51062b4fd0e8e4f68f5654462b">visit</a> = &quot;&lt;http://bnc/exp-rob-lab/2022-23#&gt;&quot;</td></tr>
<tr class="memdesc:acf742d51062b4fd0e8e4f68f5654462b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the the returned string of the <b>urgent</b> room to be visited, used to compare it with the <b>querred</b> data from the ontology.  <a href="namespacestate__machine.html#acf742d51062b4fd0e8e4f68f5654462b">More...</a><br /></td></tr>
<tr class="separator:acf742d51062b4fd0e8e4f68f5654462b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21e08bc96a59c58016e2d87e6f9e3212"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a21e08bc96a59c58016e2d87e6f9e3212">timeR1</a> = rospy.get_param(&quot;/visitedAt_R1&quot;)</td></tr>
<tr class="memdesc:a21e08bc96a59c58016e2d87e6f9e3212"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last time a location R1 is visited, passed as an argument to <b>REPLACE</b> client of armor.  <a href="namespacestate__machine.html#a21e08bc96a59c58016e2d87e6f9e3212">More...</a><br /></td></tr>
<tr class="separator:a21e08bc96a59c58016e2d87e6f9e3212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6da20d462245ba926d530b894aa23d6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a6da20d462245ba926d530b894aa23d6e">timeR2</a> = rospy.get_param(&quot;/visitedAt_R2&quot;)</td></tr>
<tr class="memdesc:a6da20d462245ba926d530b894aa23d6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last time a location R2 is visited, passed as an argument to <b>REPLACE</b> client of armor.  <a href="namespacestate__machine.html#a6da20d462245ba926d530b894aa23d6e">More...</a><br /></td></tr>
<tr class="separator:a6da20d462245ba926d530b894aa23d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca93991e781da9ae7bb4427fc8671efb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#aca93991e781da9ae7bb4427fc8671efb">timeR3</a> = rospy.get_param(&quot;/visitedAt_R3&quot;)</td></tr>
<tr class="memdesc:aca93991e781da9ae7bb4427fc8671efb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last time a location R3 is visited, passed as an argument to <b>REPLACE</b> client of armor.  <a href="namespacestate__machine.html#aca93991e781da9ae7bb4427fc8671efb">More...</a><br /></td></tr>
<tr class="separator:aca93991e781da9ae7bb4427fc8671efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af272d338e053802920329a9881c62ba1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#af272d338e053802920329a9881c62ba1">timeR4</a> = rospy.get_param(&quot;/visitedAt_R4&quot;)</td></tr>
<tr class="memdesc:af272d338e053802920329a9881c62ba1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last time a location R4 is visited, passed as an argument to <b>REPLACE</b> client of armor.  <a href="namespacestate__machine.html#af272d338e053802920329a9881c62ba1">More...</a><br /></td></tr>
<tr class="separator:af272d338e053802920329a9881c62ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6eba414b4420645fc90bbebb8433fa4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#aa6eba414b4420645fc90bbebb8433fa4">timeC1</a> = rospy.get_param(&quot;/visitedAt_C1&quot;)</td></tr>
<tr class="memdesc:aa6eba414b4420645fc90bbebb8433fa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last time a location C1 is visited, passed as an argument to <b>REPLACE</b> client of armor.  <a href="namespacestate__machine.html#aa6eba414b4420645fc90bbebb8433fa4">More...</a><br /></td></tr>
<tr class="separator:aa6eba414b4420645fc90bbebb8433fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5350559c2d48ad48a2d1888f3d40ba09"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a5350559c2d48ad48a2d1888f3d40ba09">timeC2</a> = rospy.get_param(&quot;/visitedAt_C2&quot;)</td></tr>
<tr class="memdesc:a5350559c2d48ad48a2d1888f3d40ba09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last time a location C2 is visited, passed as an argument to <b>REPLACE</b> client of armor.  <a href="namespacestate__machine.html#a5350559c2d48ad48a2d1888f3d40ba09">More...</a><br /></td></tr>
<tr class="separator:a5350559c2d48ad48a2d1888f3d40ba09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9516a25828cb0d257191aad30a641a93"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a9516a25828cb0d257191aad30a641a93">timeE</a> = rospy.get_param(&quot;/visitedAt_E&quot;)</td></tr>
<tr class="memdesc:a9516a25828cb0d257191aad30a641a93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last time a location E is visited, passed as an argument to <b>REPLACE</b> client of armor.  <a href="namespacestate__machine.html#a9516a25828cb0d257191aad30a641a93">More...</a><br /></td></tr>
<tr class="separator:a9516a25828cb0d257191aad30a641a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8a207bfb943e29b1cc4e3f471ab6ca5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#ad8a207bfb943e29b1cc4e3f471ab6ca5">time_to_stay_in_location</a> = rospy.get_param(&quot;/time_to_stay_in_location&quot;)</td></tr>
<tr class="memdesc:ad8a207bfb943e29b1cc4e3f471ab6ca5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the <b>timestep</b> for one movement, it is the same as the timestep to stay in a location, it is set in the parameter /time_to_stay_in_location, it is <b>1</b> by default.  <a href="namespacestate__machine.html#ad8a207bfb943e29b1cc4e3f471ab6ca5">More...</a><br /></td></tr>
<tr class="separator:ad8a207bfb943e29b1cc4e3f471ab6ca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a952a65d9f403c0b86bc761eab34e8314"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a952a65d9f403c0b86bc761eab34e8314">path</a> = rospy.get_param(&quot;/path&quot;)</td></tr>
<tr class="memdesc:a952a65d9f403c0b86bc761eab34e8314"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the path of the ontology, passed as an argument to the <b>REASON</b> and <b>SAVE</b> clients of armor.  <a href="namespacestate__machine.html#a952a65d9f403c0b86bc761eab34e8314">More...</a><br /></td></tr>
<tr class="separator:a952a65d9f403c0b86bc761eab34e8314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8661c7084e59fcffc506f954d3b6281"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#af8661c7084e59fcffc506f954d3b6281">client_mvbs</a> = actionlib.SimpleActionClient('move_base',MoveBaseAction)</td></tr>
<tr class="separator:af8661c7084e59fcffc506f954d3b6281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf7f3b2e69e934245fce31d351f611ff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#abf7f3b2e69e934245fce31d351f611ff">pub</a> = rospy.Publisher('/battery_state',Battery, queue_size=10)</td></tr>
<tr class="separator:abf7f3b2e69e934245fce31d351f611ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27d703beae985cf5d02da78c56c5fdf6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a27d703beae985cf5d02da78c56c5fdf6">client</a> = ArmorClient(&quot;example&quot;, &quot;ontoRef&quot;)</td></tr>
<tr class="memdesc:a27d703beae985cf5d02da78c56c5fdf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main function.  <a href="namespacestate__machine.html#a27d703beae985cf5d02da78c56c5fdf6">More...</a><br /></td></tr>
<tr class="separator:a27d703beae985cf5d02da78c56c5fdf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6793c4913a1241bddf256328c9a01028"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a6793c4913a1241bddf256328c9a01028">sm</a> = smach.StateMachine(outcomes=['container_interface'])</td></tr>
<tr class="separator:a6793c4913a1241bddf256328c9a01028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4073f732546ef14451279ae379f441a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a4073f732546ef14451279ae379f441a9">state</a> = 1</td></tr>
<tr class="separator:a4073f732546ef14451279ae379f441a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a372490be06dbd069bfafaa476a4f9f0b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a372490be06dbd069bfafaa476a4f9f0b">transitions</a></td></tr>
<tr class="separator:a372490be06dbd069bfafaa476a4f9f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c431850437f844cabf1123287e44478"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#a0c431850437f844cabf1123287e44478">sis</a> = smach_ros.IntrospectionServer('server_name', <a class="el" href="namespacestate__machine.html#a6793c4913a1241bddf256328c9a01028">sm</a>, '/SM_ROOT')</td></tr>
<tr class="separator:a0c431850437f844cabf1123287e44478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbf2f3b4f08f91ac415d0c496d674e03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestate__machine.html#acbf2f3b4f08f91ac415d0c496d674e03">outcome</a> = sm.execute()</td></tr>
<tr class="separator:acbf2f3b4f08f91ac415d0c496d674e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the <a class="el" href="namespacestate__machine.html" title="This is the state_machine node.">state_machine</a> node. </p>
<p><br  />
</p>
<dl class="section author"><dt>Author</dt><dd>Bakour Abdelghani <a href="#" onclick="location.href='mai'+'lto:'+'bak'+'ou'+'rab'+'de'+'lgh'+'an'+'i19'+'99'+'@gm'+'ai'+'l.c'+'om'; return false;">bakou<span style="display: none;">.nosp@m.</span>rabd<span style="display: none;">.nosp@m.</span>elgha<span style="display: none;">.nosp@m.</span>ni19<span style="display: none;">.nosp@m.</span>99@gm<span style="display: none;">.nosp@m.</span>ail.<span style="display: none;">.nosp@m.</span>com</a> </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>02/11/2022</dd></dl>
<p>Subsctiber to:<br  />
 /battery_state /map_state</p>
<p>Services used: <br  />
 / ArmorClient</p>
<p>Description: <br  />
 It controlls how the robot changes its state based on the reasoning of the topological ontology, and the battery state of the robot. This node subscribes to two topics /battery_state and /map_state, and it calls the armor server for updating the loaded ontology.</p>
<p>There are 4 states which are:<br  />
 FILING_MAP: The robots keeps waiting in room E untill the whole map is loaded, the robot can know if the map is fully loaded by subscribing to the topic /map_state. When the map is fully loaded the robot go to MOVING_IN_CORRIDORS state trough the transition move.</p>
<p>MOVING_IN_CORRIDORS: The robots keeps moving between C1 and C2 for infinit time, the robots keep cheking the state of the battery by subscribing to the topic /battery_state, if the battery is low the robot goes to CHARGING state trough the transition tired. if the battery is not low, the robot cheks if there is an urgent room by quering the individuals of the class urg. If there is an urgent room the robot goes to VISITING_URGENT state through the transition urgent.</p>
<p>VISITING_URGENT: First, the robots checks if the battery is low goes to CHARGING state, else it checkes it the urgent room is reacheable by quering the object properties of the robot canReach, if the room can be reached it visit it and return back to the MOVING_IN_CORRIDORS trough the transition visited. If the urgent room is not reacheable it goes to MOVING_IN_CORRIDORS state through the transition not_reached, in this case the robot will change the corridors and visit it again.</p>
<p>CHARGING: The robot keeps checking the state of the battery, if it is full it goes to MOVING_IN_COORIDORS state the the transition charged, otherwise, it stays in the CHARGING state.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespacebattery.html" title="This is the battery node.">battery</a> </dd>
<dd>
user_interface </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad7934580f48240658ac639c86f690c0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7934580f48240658ac639c86f690c0f">&#9670;&nbsp;</a></span>battery_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def state_machine.battery_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function of /battery_state, used in all the states except <b>FILLING_MAP</b> to see if the battery is low and change the state to <b>charging</b> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">No</td><td>parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>No returned value </dd></dl>

</div>
</div>
<a id="a5c680ce705e6052fa07c6cece21743d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c680ce705e6052fa07c6cece21743d0">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def state_machine.main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5df1431cc37cf831d9dde75e5436a771"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5df1431cc37cf831d9dde75e5436a771">&#9670;&nbsp;</a></span>map_state_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def state_machine.map_state_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function of /map_state, used in the state <b>FILLING_MAP</b> to see if the map is fully loaded and quit this state forever. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">No</td><td>parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>No returned value </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad2a7966e9d4ea1dd88f7edbf77e8b67b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a7966e9d4ea1dd88f7edbf77e8b67b">&#9670;&nbsp;</a></span>battery</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int state_machine.battery = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the state of the battery <b>0</b> if it is low and <b>1</b> if it is full. </p>

</div>
</div>
<a id="a27d703beae985cf5d02da78c56c5fdf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27d703beae985cf5d02da78c56c5fdf6">&#9670;&nbsp;</a></span>client</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.client = ArmorClient(&quot;example&quot;, &quot;ontoRef&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main function. </p>
<p>Initialize the node, the client of armor server, smach state machine </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">no</td><td>parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>no returned value <br  />
 </dd></dl>

</div>
</div>
<a id="af8661c7084e59fcffc506f954d3b6281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8661c7084e59fcffc506f954d3b6281">&#9670;&nbsp;</a></span>client_mvbs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.client_mvbs = actionlib.SimpleActionClient('move_base',MoveBaseAction)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9322672684b94bc7a0dfd332548511f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9322672684b94bc7a0dfd332548511f0">&#9670;&nbsp;</a></span>map_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int state_machine.map_state = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the state of the map, <b>0</b> if it is not fully loaded and <b>1</b> if it is fully loaded. </p>

</div>
</div>
<a id="acbf2f3b4f08f91ac415d0c496d674e03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbf2f3b4f08f91ac415d0c496d674e03">&#9670;&nbsp;</a></span>outcome</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.outcome = sm.execute()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a952a65d9f403c0b86bc761eab34e8314"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a952a65d9f403c0b86bc761eab34e8314">&#9670;&nbsp;</a></span>path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.path = rospy.get_param(&quot;/path&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the path of the ontology, passed as an argument to the <b>REASON</b> and <b>SAVE</b> clients of armor. </p>

</div>
</div>
<a id="abf7f3b2e69e934245fce31d351f611ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf7f3b2e69e934245fce31d351f611ff">&#9670;&nbsp;</a></span>pub</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.pub = rospy.Publisher('/battery_state',Battery, queue_size=10)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0c431850437f844cabf1123287e44478"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c431850437f844cabf1123287e44478">&#9670;&nbsp;</a></span>sis</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.sis = smach_ros.IntrospectionServer('server_name', <a class="el" href="namespacestate__machine.html#a6793c4913a1241bddf256328c9a01028">sm</a>, '/SM_ROOT')</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6793c4913a1241bddf256328c9a01028"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6793c4913a1241bddf256328c9a01028">&#9670;&nbsp;</a></span>sm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.sm = smach.StateMachine(outcomes=['container_interface'])</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4073f732546ef14451279ae379f441a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4073f732546ef14451279ae379f441a9">&#9670;&nbsp;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int state_machine.state = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad8a207bfb943e29b1cc4e3f471ab6ca5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8a207bfb943e29b1cc4e3f471ab6ca5">&#9670;&nbsp;</a></span>time_to_stay_in_location</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.time_to_stay_in_location = rospy.get_param(&quot;/time_to_stay_in_location&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the <b>timestep</b> for one movement, it is the same as the timestep to stay in a location, it is set in the parameter /time_to_stay_in_location, it is <b>1</b> by default. </p>

</div>
</div>
<a id="aa6eba414b4420645fc90bbebb8433fa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6eba414b4420645fc90bbebb8433fa4">&#9670;&nbsp;</a></span>timeC1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.timeC1 = rospy.get_param(&quot;/visitedAt_C1&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the last time a location C1 is visited, passed as an argument to <b>REPLACE</b> client of armor. </p>

</div>
</div>
<a id="a5350559c2d48ad48a2d1888f3d40ba09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5350559c2d48ad48a2d1888f3d40ba09">&#9670;&nbsp;</a></span>timeC2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.timeC2 = rospy.get_param(&quot;/visitedAt_C2&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the last time a location C2 is visited, passed as an argument to <b>REPLACE</b> client of armor. </p>

</div>
</div>
<a id="a9516a25828cb0d257191aad30a641a93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9516a25828cb0d257191aad30a641a93">&#9670;&nbsp;</a></span>timeE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.timeE = rospy.get_param(&quot;/visitedAt_E&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the last time a location E is visited, passed as an argument to <b>REPLACE</b> client of armor. </p>

</div>
</div>
<a id="a940d9e6b59330364a8daf2456d8eec2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a940d9e6b59330364a8daf2456d8eec2a">&#9670;&nbsp;</a></span>timer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int state_machine.timer = 1665579740</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>global variabl, it is a timer that is updated in every single movment of the robot, The default initial value = 1665579740 and can be changed by setting the parameter /timer </p>

</div>
</div>
<a id="a21e08bc96a59c58016e2d87e6f9e3212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21e08bc96a59c58016e2d87e6f9e3212">&#9670;&nbsp;</a></span>timeR1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.timeR1 = rospy.get_param(&quot;/visitedAt_R1&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the last time a location R1 is visited, passed as an argument to <b>REPLACE</b> client of armor. </p>

</div>
</div>
<a id="a6da20d462245ba926d530b894aa23d6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6da20d462245ba926d530b894aa23d6e">&#9670;&nbsp;</a></span>timeR2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.timeR2 = rospy.get_param(&quot;/visitedAt_R2&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the last time a location R2 is visited, passed as an argument to <b>REPLACE</b> client of armor. </p>

</div>
</div>
<a id="aca93991e781da9ae7bb4427fc8671efb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca93991e781da9ae7bb4427fc8671efb">&#9670;&nbsp;</a></span>timeR3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.timeR3 = rospy.get_param(&quot;/visitedAt_R3&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the last time a location R3 is visited, passed as an argument to <b>REPLACE</b> client of armor. </p>

</div>
</div>
<a id="af272d338e053802920329a9881c62ba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af272d338e053802920329a9881c62ba1">&#9670;&nbsp;</a></span>timeR4</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.timeR4 = rospy.get_param(&quot;/visitedAt_R4&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the last time a location R4 is visited, passed as an argument to <b>REPLACE</b> client of armor. </p>

</div>
</div>
<a id="a5e497b9927ece26bf222ca1a5eb185f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e497b9927ece26bf222ca1a5eb185f1">&#9670;&nbsp;</a></span>to_visit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string state_machine.to_visit = 'R'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the name of the <b>urgent</b> room that needs to be visited as soon as possible. </p>

</div>
</div>
<a id="a372490be06dbd069bfafaa476a4f9f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a372490be06dbd069bfafaa476a4f9f0b">&#9670;&nbsp;</a></span>transitions</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">state_machine.transitions</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acf742d51062b4fd0e8e4f68f5654462b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf742d51062b4fd0e8e4f68f5654462b">&#9670;&nbsp;</a></span>visit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string state_machine.visit = &quot;&lt;http://bnc/exp-rob-lab/2022-23#&gt;&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the the returned string of the <b>urgent</b> room to be visited, used to compare it with the <b>querred</b> data from the ontology. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
